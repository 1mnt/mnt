env:
  TG_TOKEN: "ENCRYPTED[!0354a0960f17e898e8366072a72fe998614dcb84c1db7b10e149a0ae626b1a7d8142a896b7559d9aef81b5c92ed2e1dc!]"
  TG_CHAT_ID: "ENCRYPTED[!b30827a124f46611ab38418d73aac204741dc4bef242fa936655b5d97140f6c9bcfa0adee508ddde5b643c2cad685f46!]"
  RBE_API_KEY: "ENCRYPTED[!58988043cfcf586c82c855db5bf14db0ce1b5cfd6ee48036cab5345368bd6da99af97b05ff38ca08854b210dee8e44c9!]"
  GITHUB_TOKEN: "ENCRYPTED[!df678f2492b6152e78ec218b47b640a39c8eb4779c332686271ddd85d0eaddf1eff9f3be373841b726fa2ac4a40c9640!]"

task:
  name: "Build Vanadium"
  timeout_in: 120m
  container:
    image: ghcr.io/rovars/docker:chromium
    cpu: 8
    memory: 32G
    greedy: true

  build_script:
    - rm -rf .git
    - /opt/cirrus_env --started
    - git clone -q https://rovars:${GITHUB_TOKEN}@github.com/rovars/rom rom
    - chmod +x build.sh
    - ./build.sh